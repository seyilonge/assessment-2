{"ast":null,"code":"import Cookies from 'js-cookie';\nimport { UPDATE_RESERVATION } from './reservations.actions';\nimport { Reservation } from '../../../data/objects'; // Reservations default state\n\nvar reservation = new Reservation().reservationObj;\nreservation.isSelected = true;\nvar reservationsFromCache = Cookies.get('reservations') ? JSON.parse(Cookies.get('reservations')) : undefined;\nexport var reservationsDefaultState = reservationsFromCache || [reservation]; // Reducers\n\nexport default function reservations() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : reservationsDefaultState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload,\n      type = action.type;\n\n  switch (type) {\n    case UPDATE_RESERVATION:\n      {\n        var roomNumber = payload.roomNumber;\n        var isExistingReservation = state.some(function (reservation) {\n          return reservation.roomNumber === roomNumber;\n        });\n\n        var _reservations = isExistingReservation ? state.map(function (reservation) {\n          return reservation.roomNumber === roomNumber ? payload : reservation;\n        }) : state.concat(payload).sort(function (a, b) {\n          return a.roomNumber > b.roomNumber ? 1 : -1;\n        });\n\n        return _reservations;\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n}\n;","map":{"version":3,"sources":["C:/projects/assessment-2/redux/modules/reservations/reservations.reducer.js"],"names":["Cookies","UPDATE_RESERVATION","Reservation","reservation","reservationObj","isSelected","reservationsFromCache","get","JSON","parse","undefined","reservationsDefaultState","reservations","state","action","payload","type","roomNumber","isExistingReservation","some","map","concat","sort","a","b"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,WAApB;AAEA,SAASC,kBAAT,QAAmC,wBAAnC;AACA,SAASC,WAAT,QAA4B,uBAA5B,C,CAEA;;AACA,IAAMC,WAAW,GAAG,IAAID,WAAJ,GAAkBE,cAAtC;AACAD,WAAW,CAACE,UAAZ,GAAyB,IAAzB;AACA,IAAMC,qBAAqB,GAAGN,OAAO,CAACO,GAAR,CAAa,cAAb,IACxBC,IAAI,CAACC,KAAL,CAAYT,OAAO,CAACO,GAAR,CAAa,cAAb,CAAZ,CADwB,GAExBG,SAFN;AAIA,OAAO,IAAMC,wBAAwB,GAAGL,qBAAqB,IAAI,CAACH,WAAD,CAA1D,C,CAEP;;AACA,eAAe,SAASS,YAAT,GAGb;AAAA,MAFEC,KAEF,uEAFUF,wBAEV;AAAA,MADEG,MACF;AAAA,MACUC,OADV,GAC4BD,MAD5B,CACUC,OADV;AAAA,MACmBC,IADnB,GAC4BF,MAD5B,CACmBE,IADnB;;AAEE,UAASA,IAAT;AACI,SAAKf,kBAAL;AAAyB;AACrB,YAAMgB,UAAU,GAAGF,OAAO,CAACE,UAA3B;AACA,YAAMC,qBAAqB,GAAGL,KAAK,CAACM,IAAN,CAAY,UAAAhB,WAAW;AAAA,iBAAIA,WAAW,CAACc,UAAZ,KAA2BA,UAA/B;AAAA,SAAvB,CAA9B;;AACA,YAAML,aAAY,GAAGM,qBAAqB,GACpCL,KAAK,CAACO,GAAN,CAAW,UAAAjB,WAAW,EAAI;AACxB,iBAAOA,WAAW,CAACc,UAAZ,KAA2BA,UAA3B,GAAwCF,OAAxC,GAAkDZ,WAAzD;AACH,SAFC,CADoC,GAIpCU,KAAK,CAACQ,MAAN,CAAcN,OAAd,EAAwBO,IAAxB,CAA8B,UAAEC,CAAF,EAAKC,CAAL;AAAA,iBAAYD,CAAC,CAACN,UAAF,GAAeO,CAAC,CAACP,UAAjB,GAA8B,CAA9B,GAAkC,CAAC,CAA/C;AAAA,SAA9B,CAJN;;AAMA,eAAOL,aAAP;AACH;;AACD;AAAS;AACL,eAAOC,KAAP;AACH;AAdL;AAgBH;AAAA","sourcesContent":["import Cookies from 'js-cookie';\r\n\r\nimport { UPDATE_RESERVATION } from './reservations.actions';\r\nimport { Reservation } from '../../../data/objects';\r\n\r\n// Reservations default state\r\nconst reservation = new Reservation().reservationObj;\r\nreservation.isSelected = true;\r\nconst reservationsFromCache = Cookies.get( 'reservations' )\r\n    ? JSON.parse( Cookies.get( 'reservations' ) )\r\n    : undefined;\r\n\r\nexport const reservationsDefaultState = reservationsFromCache || [reservation];\r\n\r\n// Reducers\r\nexport default function reservations (\r\n    state = reservationsDefaultState,\r\n    action\r\n) {\r\n    const { payload, type } = action;\r\n    switch ( type ) {\r\n        case UPDATE_RESERVATION: {\r\n            const roomNumber = payload.roomNumber;\r\n            const isExistingReservation = state.some( reservation => reservation.roomNumber === roomNumber );\r\n            const reservations = isExistingReservation\r\n                ? state.map( reservation => {\r\n                    return reservation.roomNumber === roomNumber ? payload : reservation;\r\n                } )\r\n                : state.concat( payload ).sort( ( a, b ) => a.roomNumber > b.roomNumber ? 1 : -1 );\r\n\r\n            return reservations;\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}